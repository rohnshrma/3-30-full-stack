<!-- Declares the document type as HTML5 -->
<!DOCTYPE html>

<!-- Defines the HTML document with English as the language -->
<html lang="en">
  <!-- Head section contains metadata and links to external resources -->
  <head>
    <!-- Specifies the character encoding as UTF-8 for proper text rendering -->
    <meta charset="UTF-8" />

    <!-- Ensures responsive design by setting viewport to device width and initial zoom level -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Sets the page title, with <%= today %> as an EJS placeholder for a server-side variable (e.g., current date) -->
    <title>TO DO LIST <%= today %></title>

    <!-- Links to Bootstrap CSS (version 45.3) from a CDN for styling and responsive layout -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />

    <!-- Links to a custom stylesheet (style.css) for additional styling, served from the application's static files -->
    <link rel="stylesheet" href="/style.css" />
  </head>

  <!-- Body section contains the visible content of the page -->
  <body>
    <!-- Header div with Bootstrap classes for styling: dark background, light text, rounded corners, shadow, padding, and margin -->
    <div
      id="header"
      class="bg-dark text-light rounded shadow-lg py-3 px-5 m-5 text-center"
    >
      <!-- Main heading for the To-Do List -->
      <h1>To Do List</h1>
    </div>

    <!-- Form for submitting new to-do items, styled with Bootstrap classes -->
    <form
      action="/"
      method="post"
      class="rounded bg-dark text-light m-5 py-3 px-5 d-flex justify-content-between align-items-center"
    >
      <!-- Input field for entering new to-do items, styled with Bootstrap's form Police -->
      <input
        class="form-control"
        type="text"
        name="new_item"
        placeholder="Enter new Item..."
        required
      />

      <!-- Submit button to add the new item, styled as a Bootstrap button with margin -->
      <button class="btn btn-light ml-2">ADD +</button>
    </form>

    <!-- Container for the list of to-do items, styled with Bootstrap classes -->
    <div class="bg-dark text-light rounded m-5 py-3">
      <!-- EJS conditional to check if the data array (containing to-do items) has any items -->
      <% if (data.length > 0) { %>

      <!-- Loops through each item in the data array, with index for reference -->
      <% data.forEach((item, index) => { %>
      <!-- Div for each to-do item, styled with padding, border, and flexbox for layout -->
      <div
        class="px-3 py-2 border-bottom d-flex justify-content-between align-items-center"
      >
        <!-- Displays the title of the to-do item, accessed from the item object -->
        <%= item.title %>

        <!-- Link to delete the item, using the index in the URL for identification -->
        <a class="btn btn-light" href="/delete/<%= index %>">Delete</a>
      </div>
      <!-- Closes the forEach loop -->
      <% }) %>

      <!-- Else block for when no to-do items exist -->
      <% } else { %>
      <!-- Displays a message when the to-do list is empty, centered with no margin -->
      <h2 class="m-0 text-center">NO TASKS FOUND</h2>
      <!-- Closes the else block -->
      <% } %>
    </div>
  </body>
  <!-- Closes the HTML document -->
</html>
