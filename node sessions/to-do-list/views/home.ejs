<!-- Declare the document type as HTML5 for proper browser rendering -->
<!DOCTYPE html>
<!-- Define the HTML document with English as the language for accessibility -->
<html lang="en">
  <head>
    <!-- Set character encoding to UTF-8 to support special characters -->
    <meta charset="UTF-8" />
    <!-- Enable responsive design by setting viewport to scale with device width -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Set dynamic page title with 'today' variable (e.g., "TO DO LIST 8/25/2025") -->
    <!-- <%= today %> outputs the date string passed from the Express server, HTML-escaped for safety -->
    <title>TO DO LIST <%= today %></title>
    <!-- Include Bootstrap 4.5.3 CSS from CDN for pre-styled, responsive components -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <!-- Include custom CSS file from the 'public' directory, served by express.static -->
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <!-- Header section with dark background, white text, and Bootstrap styling -->
    <!-- Classes: bg-dark (dark background), text-light (white text), rounded (rounded corners), shadow-lg (large shadow), py-3 (vertical padding), px-5 (horizontal padding), m-5 (margin), text-center (centered text) -->
    <div
      id="header"
      class="bg-dark text-light rounded shadow-lg py-3 px-5 m-5 text-center"
    >
      <!-- Main heading for the to-do list application -->
      <h1>To Do List</h1>
    </div>

    <!-- Form to add new tasks, submitting a POST request to the root URL ("/") -->
    <!-- Uses Bootstrap classes for styling and flexbox layout -->
    <!-- action="/" specifies the form submits to the root URL; method="post" triggers the server's POST route -->
    <form
      action="/"
      method="post"
      class="rounded bg-dark text-light m-5 py-3 px-5 d-flex justify-content-between align-items-center"
    >
      <!-- Input field for new tasks, styled with Bootstrap's form-control class -->
      <!-- name="new_item" matches req.body.new_item in the Express server's POST handler -->
      <!-- placeholder provides a hint; required prevents empty submissions -->
      <input
        class="form-control"
        type="text"
        name="new_item"
        placeholder="Enter new Item..."
        required
      />
      <!-- Submit button styled with Bootstrap's btn and btn-light classes -->
      <button class="btn btn-light ml-2">ADD +</button>
    </form>

    <!-- Container for displaying the task list, styled with Bootstrap classes -->
    <!-- bg-dark, text-light, rounded, m-5, py-3 provide consistent dark theme and spacing -->
    <div class="bg-dark text-light rounded m-5 py-3">
      <!-- Check if the 'data' array (tasks) has any items using EJS conditional -->
      <!-- data.length > 0 ensures we only loop if tasks exist -->
      <% if (data.length > 0) { %>
      <!-- Iterate over the 'data' array (tasks) using forEach -->
      <!-- item is the task text; index is its position in the array -->
      <% data.forEach((item, index) => { %>
      <!-- Display each task in a div with flexbox for layout and a bottom border -->
      <!-- px-3, py-2 (padding), border-bottom (separates tasks), d-flex (flexbox), justify-content-between (space between text and button), align-items-center (vertical alignment) -->
      <div
        class="px-3 py-2 border-bottom d-flex justify-content-between align-items-center"
      >
        <!-- Output the task text, HTML-escaped to prevent XSS attacks -->
        <!-- <%= item %> renders the task (e.g., "Buy groceries") -->
        <%= item %>
        <!-- Link to delete the task, using the index in the URL (e.g., "/delete/0") -->
        <!-- href="/delete/<%= index %>" triggers a GET request to the server's delete route -->
        <!-- Styled as a Bootstrap button (btn btn-light) -->
        <a class="btn btn-light" href="/delete/<%= index %>">Delete</a>
      </div>
      <!-- Close the forEach loop -->
      <% }) %>
      <!-- If no tasks exist, display a fallback message -->
      <% } else { %>
      <!-- Static HTML message when the task list is empty, centered with Bootstrap classes -->
      <h2 class="m-0 text-center">NO TASKS FOUND</h2>
      <!-- Close the if-else block -->
      <% } %>
    </div>
  </body>
</html>
